
--[[ 地宫冒险游戏 简介
    流程以战斗和物品驱动
    未来可联机
    战斗获得物品
    物品可加工
    城镇里有公会，酒馆等建筑物
]]

--[[ 战斗Demo功能模块
计时：
    从战斗开始倒计时，分秒形式显示
地图场景：
    显示地图
    地图中有格子，角色可以在相邻格子间移动，一个角色占用一格格子。
    地图分为上边和下边，上边为地方区域，下边为己方区域。
    鼠标中间控制镜头移动
角色位置：
    角色未移动时默认播放静置动画，并且朝向敌人
    战斗开始队员和敌人放置在一格位置
    敌人位置根据一定逻辑移动
    鼠标右键拖拽角色到新格子会显示该角色移动过去的路线，在鼠标位置UI显示消耗体力x/y，松开右键后该角色开始移动。
    角色移动会消耗体力值
    体力不足会显示红路线，体力文本为红色。
    格子不连通时不显示路线，不显示体力文本，显示红色“不连通”文本。
    角色在移动中不可被右键选中
    角色在攻击中被设置了目标位置，会等攻击完毕再移动
    角色移动过程中预览路线会一直存在
    被某一角色设为目标位置的格子不可再被指定为目标格子，途径的格子可以被指定为目标格子。角色之间无碰撞，不会挡住对方，只用确保一个格子只有一个角色。
    角色移动时播放移动动画，根据移动路径设置朝向
    移动时刷新体力显示
    停止移动时，按时间恢复体力
角色普通攻击：
    角色在没有装备武器的时候，会根据职业进行普通基础攻击，例如战士向前一格打拳，法师向前2格发火球
    装备盾牌时会格挡前方的物理攻击，侧方的无法格挡。根据角色的敏捷值决定是否能发现前方攻击并且自动改变方向来格挡
    角色装备有武器时会自动间隔时间使用武器的普通攻击
    普通攻击不消耗法力和体力
    普通攻击间隙由敏捷属性和武器共同决定。
    普通攻击时播放普通攻击动画
角色技能攻击：
    角色技能攻击由武器提供，在没有武器时无法技能攻击
    鼠标左键拖动角色，根据武器出现瞄准UI，松开左键释放技能。
    近战武器向前瞄准，弓箭或投掷武器向后瞄准，法术指向瞄准。
    根据武器，技能攻击需要消耗对应法力或体力，没有间隙。瞄准时会显示所需消耗。
    消耗法力或体力后刷新显示
    法力或体力不足时消耗红色显示，松开左键无法释放技能攻击。
    队员角色不会自动释放技能
    移动中不可左键选中
    普通攻击中可以左键选中并释放技能，技能攻击会打断普通攻击
    左键瞄准时会播放对应的瞄准动画
    技能攻击时会播放技能攻击动画
角色替换武器：
    界面武器栏会显示当前所有武器，收藏的武器优先。
    可以根据不同的条件筛选武器。
    武器显示图标，品质，耐久度。
    耐久度为0的武器无法被拖起
    鼠标移动到武器上显示武器详情，拖拽时隐藏详情。
    拖拽过程中鼠标位置显示武器图标，原图标暗色显示，鼠标位置和原图标之间显示连线。
    拖动武器栏武器到角色上会判断条件，例如职业，等级等限制。不满足会显示红色叉。松开鼠标左键且满足条件则会替换该角色的现有武器。
    如果拖动的武器被其他角色使用，则替换后另一个角色将没有武器。
    武器会显示在角色手上
角色使用道具：
    界面道具栏会显示当前所有道具，收藏的道具优先。
    可以根据不同条件筛选道具。
    道具显示图标，品质，个数。
    鼠标移动到道具上显示道具详情，拖拽时隐藏详情。
    拖拽过程中鼠标位置显示道具图标，原图标暗色显示，鼠标位置和原图标之间显示连线。
    拖拽到角色上松开鼠标左键对该角色使用道具。
    道具使用一次减少一个个数。个数为0后从道具栏里清除。
    使用道具会播放使用动画
    移动和普通攻击中可以使用道具，技能攻击中与该操作互斥，不会出现该情况。
角色栏显示：
    显示所有队员
    显示头像，血条，法力，体力，职业，等级，拿的武器图标
    右侧显示拥有的buff和debuff
    角色死亡后显示“死亡”文本，灰色头像
    点击角色头像镜头聚焦到该角色，头像上显示箭头，3次后隐藏箭头
角色漂浮界面：
    位置在角色上方
    实时显示显示名字，血条，法力，体力。
角色受攻击：
    角色受到攻击时会扣血
    漂浮扣血数字
    受伤实时刷新血条
    血量为0时死亡
    死亡播放死亡动画，倒地不消失，不可再操作
暂停：
    暂停时所有动画停止，禁止所有操作，停止倒计时
    暂停时可以移动镜头
    暂停只暂停战斗，不暂停UI
战斗开始：
    开始时先生成地图和角色，放置角色
    开始倒计时
    暂停
    显示战斗开始UI，UI动画不被暂停
    开始UI关闭后停止暂停
战斗结束：
    在一方角色全部死亡后战斗结束
    倒计时结束后没有分出胜负则判定玩家输
    结束后暂停
    弹出结算UI
]]
